<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

  </head>
  <body>
      <script>
      console.log("Testing /doSearch");

      // Fuck, 'need' this Person prepend shit,
      // due to the way Haskell's models generates the ADTs.
      // ("need" is always relative, though.. but it's more concise
      //  server-side this way)
      var person1 = {"personName": "Richard", "personPostal": 618656, "personPhone": 1234, "personLocation": {"lat": 1.2, "lng": 3.4}};
      var person2 = {"personName": "Yatish",  "personPostal": 117417, "personPhone": 5678, "personLocation": {"lat": 5.6, "lng": 7.8}};

      $(document).ready(function(){
        $.post("http://localhost:3000/doSearch",
               JSON.stringify({
                 "people": [person1, person2]
               }),
               gotBackFromDoSearch);
      });

      function gotBackFromDoSearch(response) {
        console.log("** /doSearch callback **");
        console.log("RES:" + response);
        console.log(JSON.stringify(response));

        // {searchId:}
        var searchId = response.searchId;

        $.get("http://localhost:3000/search/" + searchId + "/people",
              "",
              gotBackFromGetSearchPeople);
      }

      function gotBackFromGetSearchPeople(response) {
        console.log("** /search/#SearchId/people callback **");
        console.log("RES:" + response);
        console.log(JSON.stringify(response));

        // {people:[]}
      }
      </script>
  </body>
</html>
