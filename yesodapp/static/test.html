<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

  </head>
  <body>
      <script>
      console.log("Testing /doSearch");

      // Fuck, API changed.
      // "phone" is optional,
      // "location" is ignored, computed serverside.
      var person1 = {"name": "Richard", "postal": 618656};
      var person2 = {"name": "Yatish",  "postal": 117417, "phone": 5678};

      $(document).ready(function(){
        $.post("http://localhost:3000/doSearch",
               JSON.stringify({
                 "people": [person1, person2]
               }),
               gotBackFromDoSearch);
      });

      function gotBackFromDoSearch(response) {
        console.log("** /doSearch callback **");
        console.log("RES:" + response);
        console.log(JSON.stringify(response));

        // {searchId:}
        var searchId = response.searchId;

        $.get("http://localhost:3000/search/" + searchId + "/people",
              "",
              gotBackFromGetSearchPeople);
      }

      function gotBackFromGetSearchPeople(response) {
        console.log("** /search/#SearchId/people callback **");
        console.log("RES:" + response);
        console.log(JSON.stringify(response));

        // {people:[]}
      }
      </script>
  </body>
</html>
